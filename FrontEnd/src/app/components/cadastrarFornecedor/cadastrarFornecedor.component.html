<div class="animate__animated animate__fadeInUp">
  <app-titulo
  [titulo]="'Cadastrar Fornecedor(a)'"
  [iconClass]="'fa fa-file'" aria-hidden="true"
  [iconClass2]="'fas fa-arrow-circle-left fa-2x'"
  [botao]="true"
  [message]="'Voltar'"
  [novaRota]="'/fornecedor'">
  </app-titulo>
</div>

<div class="row animate__animated animate__fadeInUp centro">
  <div class="form-group col-md-12">
    <div class="card rounded shadow-sm">
      <form [formGroup]="form">
        <div class="p-3">

          <div class="form-row">

            <div class="form-group col-md-1"></div>

            <div class="form-group col-md-4">
              <label>Nome</label>
              <input type="text" class="form-control" [ngClass]="cssValidator(f.nome)"
              formControlName="nome" placeholder="Insira o nome do fornecedor(a)">
              <div *ngIf="f.nome.errors?.required && f.nome.touched" class="invalid-feedback">
                Nome é obrigatório.
              </div>
              <div *ngIf="f.nome.errors?.minlength" class="invalid-feedback">
                Nome deve ter no mínimo 2 caracteres.
              </div>
              <div *ngIf="f.nome.errors?.maxlength" class="invalid-feedback">
                Nome deve ter no máximo 70 caracteres.
              </div>
            </div>

            <div class="form-group col-md-4">
              <label>Empresa</label>
              <select class="form-control" formControlName="empresaId" [ngClass]="cssValidator(f.empresaId)">
                <option value="" default selected>Selecione uma opção</option>
                <option *ngFor="let empresa of empresas" [value]="empresa.id">
                  {{empresa.nome}}
                </option>
              </select>
            </div>

            <div class="form-group col-md-1">
              <label>Idade</label>
              <input  type="number"  class="form-control" [ngClass]="cssValidator(f.idade)"
              formControlName="idade" placeholder="000">
              <div *ngIf="f.idade.errors?.required && f.idade.touched" class="invalid-feedback">
                Idade é obrigatório.
              </div>
              <div *ngIf="f.idade.errors?.max && f.idade.touched" class="invalid-feedback">
                Idade deve ser menor ou igual a 100.
              </div>
            </div>

          </div>

          <div class="form-row">

            <div class="form-group col-md-1"></div>

            <div class="form-group col-md-2">
              <label>CPF</label>
              <input type="text" mask="000.000.000-00" class="form-control" [ngClass]="cssValidator(f.cpf)"
              formControlName="cpf" placeholder="000.000.000-00">
              <div *ngIf="f.cpf.errors?.required && f.cpf.touched" class="invalid-feedback">
                Cpf é obrigatório.
              </div>
            </div>

            <div class="form-group col-md-2">
              <label>CNPJ</label>
              <select class="form-control" formControlName="cnpjId" [ngClass]="cssValidator(f.cnpjId)">
                <option value="" default selected>Selecione uma opção</option>
                <option *ngFor="let empresa of empresas" [value]="empresa.id">
                  {{empresa.cnpj | cnpj}}
                </option>
              </select>
            </div>

            <div class="form-group col-md-5">
              <label>E-mail</label>
              <input type="email" class="form-control" [ngClass]="cssValidator(f.email)"
              formControlName="email" placeholder="Insira o e-mail">
              <div *ngIf="f.email.errors?.required && f.email.touched" class="invalid-feedback">
                E-mail é obrigatório.
              </div>
              <div *ngIf="f.email.errors?.email && f.email.touched" class="invalid-feedback">
                Deve ser um endereço de e-mail válido
              </div>
            </div>

          </div>



          <div class="form-row">

            <div class="form-group col-md-1"></div>

            <div class="form-group col-md-2">
              <label>RG</label>
              <input type="text" mask="00.000.000-00" class="form-control" [ngClass]="cssValidator(f.rg)"
              formControlName="rg" placeholder="00.000.000-00">
              <div *ngIf="f.rg.errors?.required && f.rg.touched" class="invalid-feedback">
                RG é obrigatório.
              </div>
            </div>

            <div class="form-group col-md-2">
              <label>Data de Nascimento</label>
              <input type="text"  class="form-control" [ngClass]="cssValidator(f.dataNascimento)"
              formControlName="dataNascimento" placeholder="00/00/0000">
              <div *ngIf="f.dataNascimento.errors?.required && f.dataNascimento.touched" class="invalid-feedback">
                Data de Nascimento é obrigatório.
              </div>
            </div>

            <div class="form-group col-md-2">
              <label>Data de Cadastro</label>
              <input type="text"class="form-control" [ngClass]="cssValidator(f.dataCadastro)"
              formControlName="dataCadastro" placeholder="00/00/0000">
              <div *ngIf="f.dataCadastro.errors?.required && f.dataCadastro.touched" class="invalid-feedback">
                Data de Cadastro é obrigatório.
              </div>
            </div>

            <div class="form-group col-md-2">
              <label>Telefone</label>
              <select class="form-control" formControlName="telefoneId" [ngClass]="cssValidator(f.telefoneId)">
                <option value="" default selected>Selecione uma opção</option>
                <option *ngFor="let telefone of telefones" [value]="telefone.id">
                  {{telefone.numeroTelefone | telefone}}
                </option>
              </select>
            </div>

          </div>


        </div>
        <div class="card-footer">
          <div class="d-flex">
            <button class="btn btn-secondary mr-auto border" (click)="resetForm()">
              Cancelar Alteração
            </button>
            <button class="btn btn-outline-dark ml-2" [disabled]="!form.valid" (click)="salvarFornecedor()">
              Cadastrar Fornecedor
            </button>
          </div>
        </div>

      </form>
    </div>
</div>

</div>
